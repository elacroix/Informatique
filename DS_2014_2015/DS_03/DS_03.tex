\documentclass[10pt]{article}
\input{style/coursHeadings}
\input{style/programHeadings}
\input{style/macros_SII}
\input{style/macros_Titres}
\input{style/macros_Frames}
\usepackage{fancybox}
\newsavebox{\codebox}
\newsavebox{\codeboxx}

%Si le boolen xp est vrai : compilation pour xabi
%Sinon compilation Damien
\newboolean{xp}
\setboolean{xp}{true}

\newboolean{prof}
\setboolean{prof}{false}


% Commenter \proffalse et décommenter \proftrue pour avoir le corrigé
\newif\ifprof
%\proftrue
\proffalse

\newif\iftd
\tdtrue
%\tdfalse

\usepackage[%
    pdftitle={Devoirs Surveillé 3},
    pdfauthor={Xavier Pessoles},
    colorlinks=true,
    linkcolor=blue,
    citecolor=magenta]{hyperref}


\def\discipline{Informatique}
\def\xxtitre{\ifthenelse{\boolean{xp}}{
Devoir surveillé d'informatique 3}{
Chapitre  -- }}

\def\xxsoustitre{\ifthenelse{\boolean{xp}}{
CI 2 : Algorithmique et programmation 

\vspace{.5cm}

Tracé de l'abaque du temps de réponse réduit}{
Partie  -- }}

\def\xxauteur{\ifthenelse{\boolean{xp}}{
Xavier \textsc{Pessoles}}{
}}

\def\xxpied{\ifthenelse{\boolean{xp}}{
DS Informatique\\
\ifprof Corrige \else Sujet \fi}{
\xxtitre}}

\def\xxcathegorie{\ifthenelse{\boolean{xp}}{
2013 -- 2014 \\
Xavier \textsc{Pessoles}}{
Informatique - Cours}}





%---------------------------------------------------------------------------


\begin{document}

\ifthenelse{\boolean{xp}}{\input{style/enteteXP}}{\input{style/enteteDI}}


\ifprof
\begin{center}
\large{\textit{Éléments de corrigé}}
\end{center}
\else
\begin{flushright}
\large{\textsl{Nom : .......................................}}
\end{flushright}
\fi

\vspace{1cm}

\begin{obj}

L'objectif de ces travaux est de construire le programme permettant de tracer l'abaque du temps de réponse réduit utilisé en asservissement pour connaître le temps de réponse à 5\% des systèmes d'ordre 2. 
\end{obj}

\subsection*{Mise en situation}

L'équation différentielle d'un système du second ordre peut se mettre sous la forme :

\vspace{.25cm}

\begin{minipage}[c]{.48\linewidth}
$$
s(t)
+\dfrac{2\xi}{\omega_0}\cdot \dfrac{\text{d}s(t)}{\text{d}t}
+\dfrac{1}{\omega_0^2}\cdot \dfrac{\text{d}^2s(t)}{\text{d}t^2}
= K\cdot e(t)
$$
\end{minipage}\hfill
\begin{minipage}[c]{.48\linewidth}
en notant :
\begin{itemize}
\item $K$ : le gain statique;
\item $\xi$ : le coefficient d'amortissement;
\item $e(t)$ et $s(t)$ : l'entrée et la sortie du système. 
\end{itemize}
\end{minipage}

\vspace{.5cm}

On suppose que toutes les conditions initiales sont nulles. Pour une entrée unitaire de type échelon unitaire $e(t)=u(t)$, $K=1$ et $t\geq0$ on montre que : 
\begin{itemize}
\item si $\xi <1$, le régime est pseudo périodique et :
$$
s(t)=1-\dfrac{e^{-\xi\omega_0 t}}{\sqrt{1-\xi^2}}\sin\left(  \omega_0 t\sqrt{1-\xi^2}+\arcsin \sqrt{1-\xi^2} \right)
$$
\item si $\xi=1$, le régime est critique et : 
$$
s(t)=1-\left(1+\omega_0 t \right)e^{-\omega_0 t} 
$$
\item si $\xi>1$, le régime est apériodique et : 
$$
s(t)=1
+\dfrac{e^{- \omega_0 t\left( \xi + \sqrt{\xi^2-1}\right)}}{2\left(\xi\sqrt{\xi^2-1}+\xi^2-1 \right)}
-\dfrac{e^{- \omega_0 t \left( \xi - \sqrt{\xi^2-1}\right)}}{2\left(\xi\sqrt{\xi^2-1}-\xi^2+1 \right)}
$$
\end{itemize} 

\begin{center}
\textbf{Dans l'ensemble de ce sujet, on considèrera que $s$ est une fonction du temps réduit $t\cdot\omega_0$.}
\end{center}


\subsection*{Tracé de la réponse indicielle}

On dispose des fonctions Python \textbf{\textsf{f\_pseudo}} et \textbf{\textsf{f\_aperiodique}} permettant d'évaluer la fonction pour $s$ pour un couple $(t\omega_0,\xi)$.

\subparagraph{} \textit{Donner, en Python, le contenu de la fonction \textsf{f\_critique} permettant de définir la fonction $(t\omega_0) \rightarrow s(t\omega_0)$ dans le cas où $\xi=1$.}


\subparagraph{} \textit{Donner, en Python, le contenu de la fonction \textsf{f\_s} permettant de définir la fonction $(t\omega_0,\xi) \rightarrow s(t\omega_0\xi)$ dans le cas où $\xi\in \mathbb{R}_+^*$. On donne ci-dessous les spécifications de la fonction.}

\begin{py}
\begin{python}
def f_s(tom0,z):
    """
    Fonction permettant de calculer la réponse indicielle d'un système du second ordre. 
    Entrées : 
        * tom0, flt : temps de réponse réduit
        * z, flt : coefficient d'amortissement
    Sortie : 
        * s(tom0,z)
    """
\end{python}
\end{py}


La fonction \textbf{\textsf{trace\_s}} donnée ci-dessous permet de tracer $s(t\omega_0,\xi)$ pour $t\omega_0 \in [0,10]$ par pas de 1 et pour une valeur de $\xi$ déterminée. Les deux appels successifs de la fonction \textbf{\textsf{trace\_s}} permettent de réaliser le tracer les 2 courbes ci-dessous.


\begin{minipage}[c]{.48\linewidth}
\begin{py}
\begin{python}
# Définition de la fonction trace
def trace_s(z):
    x = []
    y = []
    for i in range(11):
        t = i
        x.append(t)
        y.append(f_s(t,z))
    plot(x,y)
# Appels de la fonction trace
trace_s(0.4)
trace_s(0.7)

\end{python}
\end{py}
\end{minipage} \hfill
\begin{minipage}[c]{.48\linewidth}
\begin{center}
\includegraphics[width=\textwidth]{images/courbe}
\end{center}
\end{minipage}

\subparagraph{}
\textit{Expliquer l'objectif des lignes 2 à 9.}

\vspace{.25cm}

On observe que la courbe tracée n'est pas lissée. Pour avoir un meilleur rendu, il est nécessaire d'évaluer la fonction en davantage de points. 

\subparagraph{}
\textit{Modifier les lignes 5 et 6 pour que la courbe tracée soit réalisée en 1000 points sur un intervalle de $t \omega_0$ variant de 0 à 10. }

\ifprof
\begin{corrige}
\begin{py}
\begin{python}
def trace_s(z):
    x = []
    y = []
    n = 1000
    for i in range(n+1):
        t = 10*i/n
        x.append(t)
        y.append(f_s(t,z))
    plot(x,y)
\end{python}
\end{py}
\end{corrige}
\else
\fi

\subsection*{Tracé de l'abaque}

On note $t_r$  le temps de réponse à 5\%. L'abaque du temps de réponse permet de tracer le produit $t_r\omega_0$ en fonction du coefficient d'amortissement $\xi$.

\subparagraph{}
\textit{Dans les conditions de la fonction $s$ définie dans la partie précédente, quelle est la valeur finale prise par $s(t)$ ?} 

\subparagraph{}
\textit{Écrire en Python la fonction \textsf{\textbf{is\_in\_strip}} ayant les spécifications suivantes : } 

\begin{py}
\begin{python}
def is_in_strip(x):
    """
    Fonction permettant de savoir si une valeur est dans la bande des + ou - 5% de la valeur finale.
    Entrée : 
        x, flt : réel
    Sortie : 
        True si la valeur est dans la bande à + ou - 5%
        False si la valeur n'est pas dans la bande à + ou - 5%
    """
\end{python}
\end{py}

On donne la fonction suivante permettant de connaître le temps de réponse réduit à partir duquel la réponse indicielle d'un système est dans la bande à plus ou moins 5\%.

\begin{py}
\begin{python}
def f(z):
    tom0  = 500
    pas_tom0  = 0.05
    x = f_s(tom0,z) 
    while is_in_strip(x) :
        x = f_s(tom0,z)
        tom0  = tom0 - pas_tom0
    return tom0
\end{python}
\end{py}

\end{document}
